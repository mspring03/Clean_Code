# [01장] 깨끗한 코드
이 책은 좋은 프로그램을 작성하는 요령을 설명하는 책이고 온통 코드들이다. 코드를 최대한 다양한 시선으로 살펴본다. 이 책을 읽고 나면 코드에 대해 많은 사실을 배운다. 그리고 좋은 코드 나쁜 코드를 구분하는 능력도 생긴다. 좋은 코드를 작성하는 방법도 배운다. 마지막으로 나쁜 코드를 좋은 코드로 바꾸는 실력도 쌓인다.

## 목차

  1. [코드가 존재하리라](#코드가-존재하리라)
  2. [나쁜 코드](#나쁜-코드)
  3. [나쁜 코드로 치르는 대가](#나쁜-코드로-치르는-대가)   
  3.1 [원대한 재설계의 꿈](#원대한-재설계의-꿈)   
  3.2 [태도](#태도)   
  3.3 [원초적 난제](#원초적-난제)   
  3.4 [깨끗한 코드라는 예술?](#깨끗한-코드라는-예술?)   
  3.5 [깨끗한 코드란?](#깨끗한-코드란?)
  9. [우리들 생각](#우리들-생각)
  10. [우리는 저자다](#우리는-저자다)
  11. [보이스카우트 규칙](#보이스카우트-규칙)
  12. [프리퀄과 원칙](#프리퀄과-원칙)
  13. [결론](#결론)
  14. [참고 문헌](#참고-문헌)

**[⬆ 위로가기](#목차)**
## 코드가 존재하리라
코드의 종말이 코앞에 닥쳤다고 주장하는 사람이 없지 않다.  
헛소리! 앞으로 코드가 사질 가망은 전혀 없다. 왜? 코드는 요구사항을 상세히 표현하는 수단이니까!   
궁극적으로 코드는 **요구사항을 표현하는 언어**라는 사실을 명심한다. 어느 순간에는 정밀한 표현이 필요하다.   
그 필요성을 없앨 방법은 없다. 그러므로 코드도 항상 **존재**하다.

**[⬆ 위로가기](#목차)**
## 나쁜 코드
나쁜 코드에 발목이 잡혀 고생한 기억이 있는가?   
프로그래밍을 한번이라도 해봤다면 수없이 경험했으이라. 심지어 이름도 있다. '고행(wadding'이라 부른다.   
어째서 나쁜 코드를 짰는가? 급해서? 서두르느라? 등등 모두가 겪어본 일이다.   
우리 모두는 자신이 짠 쓰레기 코드를 보며 **나중에 손보겠다고** 생각한 경험이 있다. 안 돌아가는 프로그램보다 돌아가는 쓰레기가 낫다고 스스로를 위로한 경험이 있다. 다시 돌아와 나중에 정리하겠다고 다짐했었다.   
물론 그때 그 시절 우리는 르블랑의 법칙을 몰랐다. **나중은 결코 오지 않는다.**

**[⬆ 위로가기](#목차)**
## 나쁜 코드로 치르는 대가
2-3년 넘게 프로그램을 짰다면 남들이 짠 쓰레기 코드로 고생한 경험이 있으리라.   
나쁜 코드는 개발 속도를 크게 떨어뜨린다.   
나쁜 코드가 쌓일수록 팀 생산성은 떨어진다. 그러다가 마침내 0에 근접한다.   

**[⬆ 위로가기](#목차)**
> ### 원대한 재설계의 꿈
마침내 팀이 반기를 든다. 그들은 혐오스러운 코드로는 더이상 일하지 못하겠다며 재설계를 요구한다.   
새로운 타이거 팀이 구성된다. 처음부터 시작해 진정으로 아름다운 작품을 창조할 거니까.   
타이거팀과(기존 시스템 기능 100%) 기존 팀은(유지보수) 경주를 시작한다.   
때때로 경주는 아주 오랫동안 이어진다. 새 시스템이 기존 시스템을 따라잡을 즈음이면 타이거팀원들은 모두 팀을 떠났고 새로운 팀원들이 새 시스템을 설계하자고 나선다. 왜? 현재 시스템이 너무 엉망이라서   

이 이야기를 일부라도 겪었다면 시간을 들여 **깨끗한 코드를 만드는 노력**이 비용을 절감하는 방법일 뿐만 아니라 전문가로서 살아남는 길이라는 사실을 인정하리라.


**[⬆ 위로가기](#목차)**
> ### 태도
프로젝트 실패는 우리에게 커다란 책임이 있다. 특히 나쁜 코드가 초래하는 실패에는 더더욱 책임이 크다.   
대다수 관리자는 일정에 쫓기더라도 좋은 코드를 원한다.   좋은 코드를 사수하는 일은 바로 우리 프로그래머들의 책임이다.   

비유를 하나 들겠다. 자신이 의사라 가정하자. 어느 환자가 수술 전에 손을 씻지 말라고 요구한다. 시간이 너무 걸리니까. 확실히 환자는 상사다. 하지만 의사는 단호하게 거부한다. 왜? 질병과 감염의 위험은 환자보다 의사가 더 잘 아니까. 환자 말을 그대로 따르는 행동은 범죄일 뿐만 아니라 전문가 답지 못하니까.

프로그래머도 마찬가지다. **나쁜 코드의 위험을 이해하지 못하는 관리자 말을 그대로 따르는 행동은 전문가답지 못하다.**

**[⬆ 위로가기](#목차)**
> ### 원초적 난제
한두 해 이상 몸 담은 프로그래머라면 누가나 나쁜 코드가 업무 속도를 늦춘다는 사실을 안다. 그럼에도 모든 프로그래머가 기한을 맞추려면 나쁜 코드를 짤수 밖에 없다고 느낀다.   

진짜 전문가는 두번째 부분이 틀렸다는 사실을 잘 안다. 나쁜 코드를 양산하면 기한을 맞추지 못한다. 오히려 엉망진창인 상태로 인해 속도가곧바로 늦어지고, 결국 기한을 놓친다.

**기한을 맞추고, 빨리 가는 유일한 방법은 언제나 코드를 최대한 깨끗하게 유지하는 습관이다.**

**[⬆ 위로가기](#목차)**
> ### 깨끗한 코드라는 예술?
나쁜 코드가 심각한 장애물이고 빨리 가려면 코드를 깨끗하게 유지해야 한다는 사실도 인정했다고 가정하자.   
다음 질문을 던질 차례다. "깨끗한 코드를 어떻게 작성할까?" 깨끗한 코드가 무엇인지 모르면 아무 소용이 없다.

안타깝게도 깨끗한 코드를 구현하는 행위는 그림을 그리는 행위와 비슷하다. 그림을 보면 대부분의 사람은 잘 그려졌는지 엉망으로 그려졌는지 안다. 그렇지만 잘 그린 그림을 구분하는 능력이 그림을 잘 그리는 능력은 아니다.   

다시 말해, **깨끗한 코드와 나쁜 코드를 구분할 줄 안다고 깨끗한 코드를 작성할 줄 안다는 뜻은 아니다.**   

열쇠는 **코드 감각**이다. 어떤 사람은 타고나거나 투쟁해서 얻어야한다. **코드 감각**이 있으면 좋은 코드와 나쁜 코드를 구분한다.
'코드 감각'이 없는 프로그래머도 때로는 나쁜 모듈을 알아본다. 하지만 그것으로 끝이다. **코드 감각**이 있는 프로그래머는 나쁜 모듈을 보면 좋은 모듈로 개선할 방안을 떠올린다.   

다시 말해, **깨끗한 코드를 작성하는 프로그래머는 빈 캔퍼스를 우아한 작품으로 바꿔가는 화가와 같다**.

**[⬆ 위로가기](#목차)**
> ### 깨끗한 코드란?
프로그래머 수만큼 정의도 다양하리라.

#### 비야네 스트롭스트룹
깨끗한 코드는 **한 가지에 집중한다.** 각 함수와 클래스와 모듈은 주변 상황에 현혹되거나 오염되지 않은 채 한길만 걷는다.

#### 그래디 부치
깨끗한 코드는 단순하고 직접적이여 잘 쓴 문장처럼 읽힌다. **가독성**을 강조한다.   
코드는 추측이 아니라 사실에 기반해야 한다. 반드시 필요한 내용만 담아야 한다. 코드를 읽는 사람에게 프로그래머가 단호하다는 인상을 남겨야 한다.

#### 큰 데이브 토마스
깨끗한 코드란 **다른 사람**이 고치기 쉽다고 단언한다.   
또한 코드가 '문학적'이어야 한다고 말한다. 요점은 인간이 읽기 좋은 코드를 작성하라는 말이다.

#### 마이클 페더스
깨끗한 코드는 **'주의'** 깊게 작성한 코드다. 누군가 시간을 들여 깔끔하고 단정하게 정리한 코드다. 세세한 사항까지 꼼꼼하게 신경쓴 코드다. 주의를 기울인 코드다.

#### 론 제프리스
중복을 피하라, 한 기능만 수행하라, 제대로 표현하라, 작게 추상화하라, 초반부터 간단한 추상화 고려하기.

#### 워드 커닝햄
짐작했던 기능을 그대로 수행한다면 깨끗한 코드라 불러도 되겠다.   
깨끗한 코드는 읽으면서 놀랄 일이 없어야 한다. 읽으면서 짐작한 대로 돌아가는 코드가 깨끗한 코드다.   

"코드가 그 문제를 풀기 위한 **언어**처럼 보인다면" 아름다운 코드라 말한다. 언어를 단순하게 보이도록 만드는 열쇠는 프로그래머다!

**[⬆ 위로가기](#목차)**
## 우리들 생각
이 책에선 나와 동료들이 생각하는 깨끗한 코드를 끔직할 정도로 상세히 설명한다.   
절대적으로 옳은 문파는 없다. 하지만 자신이 속한 것이 옳고 가장 좋다고 간주한다.   

우리가 가르치는 기법을 따른다면 깨끗하고 수준 높은 코드를 작성하리라 감히 장담한다. 하지만 우리 생각이 **절대적으로 '옳다'라는 단정은 금물이다.**

**[⬆ 위로가기](#목차)**
## 우리는 저자다
저자에게는 독자가 있다. 그리고 저자에게는 독자와 잘 소통할 **책임**도 있다.    
다음에 코드를 짤때는 자신이 저자라는 사실을, 여러분의 노력을 보고 판단을 내릴 **독자가 있다는 사실**을 기억하기 바란다.   

코드를 읽는 시간 대 코드를 짜는 시간 비율이 10 대 1을 훌쩍 넘는다. 새 코드를 짜면서 **끊임없이** 기존 코드를 읽는다. 비율이 이렇게 높으므로 읽기 쉬운 코드가 매우 중요하다.   

이 논리에 빠져나갈 방법은 없다. 주변 코드를 읽지 않으면 새 코드를 짜지 못하고 주변코드가 읽기 쉬우면 새 코드를 짜기 쉽고, 주변 코드가 읽기 어려우면 새 코드를 짜기도 어렵다.   
서둘러 끝내려면, 쉡게 짜려면, **읽기 쉽게** 만들면 된다.

**[⬆ 위로가기](#목차)**
## 보이스카우트 규칙
잘 짠 코드가 전부는 아니다. 시간이 지나도 언제나 깨끗하게 유지해야 한다.   

미국 보이스카우트가 따르는 간단한 규칙이 우리 전문가들에게도 유용하다.   
'캠프장은 처음 왔을 때보다 더 깨끗하게 해놓고 떠나라.'   

체크아웃할 때보다 좀 더 **깨끗한 코드**를 체크인 한다면 코드는 절대 나빠지지 않는다. 변수 이름 하나 개선, 조금 긴 함수 분할, 약간의 중복 제거, 복잡한 if 문 하나 정리면 충분하다.

**[⬆ 위로가기](#목차)**
## 프리퀄과 원칙
이 책은 내가 2002년에 출판한 PPP의 프리퀄이다. PPP 책은 객체 지향 설계의 원칙을 설명하고 전문 개발자들이 사용하는 실무 기법을 소개한다. 이 책(Clean Code)을 읽은 후 나중에 PPP를 읽어보기 바란다. PPP는 이책에서 하는 이야기를 이어간다.

**[⬆ 위로가기](#목차)**
## 결론
예술에 대한 책을 읽는다고 예술가가 된다는 보장은 없다. 책은 단지 다른 예술가가 사용하는 도구와 기법, 생각하는 방식을 속할 뿐이다.   
이 책 또한 마찬가지다. 이 책을 읽는다고 뛰어난 프로그래머가 된다는 보장은 없다. '코드 감각'을 확실히 얻는다는 보장도 없다. 단지 방식을 소개할 뿐이다.   

이 책은 세세한 정보로 가득하다. 코드도 많다. 좋은 코드도 소개하고 나쁜 코드도 소개한다. 나쁜 코드를 좋은 코드로 바꾸는 방법도 소개한다. 다양한 경험적 교훈과 체계와 절차와 기법도 열거한다. 예제도 무수히 많이 보여준다.   
**나머지는 여러분에게 달렸다.**

**[⬆ 위로가기](#목차)**
## 참고 문헌
**[Beck07]**: Implementation Patterns, Kent Beck, Addison-Wesley, 2007.   
**[Knuth92]**: Literate Programming, Donald E. Knuth, Center for the Study of Language and Informatiln, Leland Standfort Junior University, 1992